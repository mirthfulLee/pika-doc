---
title: 数据迁移 3.3.6 -> 3.5
---

**Q：如何从 3.3.6 迁移数据到 3.5？**

A：假设有 3.3.6 实例 A，可进行如下操作：  
1. 在任意环境再启动一个新的 3.3.6 实例 B，通过运维操作让 B 变成 A 的 slave；  
2. 等 B 数据全量同步完毕，通过运维手段封禁 A 的写请求；  
3. 杀掉 B 进程；  
4. 在 B 进程环境把 3.3.6 Pika 二进制文件升级到 3.5 Pika，同时把 配置文件也升级到 3.5 版本的配置文件，启动该 3.5 版本的 Pika；  
5. 把上次的读写请求 redirect 引导到 3.5 版本的 B，对写请求解封。
    
原因：主从3.3.6 通过rsync 实现全量同步，通过推模式实现增量同步。3.5.1 不使用 rsync 了，我们自己实现了全新的全量同步机制。增量同步从 master 到 slave 的推模式改为了 slave 到 master 的拉模式。